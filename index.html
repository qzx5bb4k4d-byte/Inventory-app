<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Inventory Web App</title>
<style>
  body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; max-width: 600px; margin: auto; }
  h1 { text-align: center; }
  .card { background: white; padding: 16px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
  button { width: 100%; padding: 12px; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; background: #007bff; color: white; margin-bottom: 10px; }
  button.secondary { background: #6c757d; }
  video { width: 100%; border-radius: 12px; }
  .item { display: flex; justify-content: space-between; padding: 10px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 5px; }
</style>
</head>
<body>
<h1>Inventory Web App</h1>

<div class="card">
  <button id="toggleCamera">Start Camera Scanner</button>
  <video id="video" autoplay muted playsinline style="display:none;"></video>
  <button class="secondary" id="manualBtn">Enter Barcode Manually</button>
</div>

<div class="card">
  <h2>Inventory</h2>
  <div id="inventoryList"></div>
</div>

<script>
  const video = document.getElementById("video");
  const toggleCameraBtn = document.getElementById("toggleCamera");
  const manualBtn = document.getElementById("manualBtn");
  const inventoryList = document.getElementById("inventoryList");

  let scannerActive = false;
  let items = {};

  toggleCameraBtn.addEventListener("click", async () => {
    scannerActive = !scannerActive;

    if (scannerActive) {
      toggleCameraBtn.textContent = "Stop Camera";
      video.style.display = "block";

      const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
      video.srcObject = stream;

      // Barcode scanning integration can be added here

    } else {
      toggleCameraBtn.textContent = "Start Camera Scanner";
      video.style.display = "none";

      if (video.srcObject) {
        video.srcObject.getTracks().forEach(track => track.stop());
      }
    }
  });

  manualBtn.addEventListener("click", () => {
    const code = prompt("Enter barcode manually");
    if (code) logScan(code);
  });

  function logScan(code) {
    if (items[code]) items[code].qty++;
    else items[code] = { name: `Item ${code}`, qty: 1 };
    renderInventory();
  }

  function renderInventory() {
    inventoryList.innerHTML = "";
    Object.entries(items).forEach(([code, item]) => {
      const div = document.createElement("div");
      div.className = "item";
      div.innerHTML = `<span>${item.name}</span><span>Qty: ${item.qty}</span>`;
      inventoryList.appendChild(div);
    });
  }
</script>
</body>
</html>
